<!DOCTYPE html>
<html lang="ja">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>一人称プラットフォーマー</title>
    <link rel="stylesheet" href="style.css">
</head>
<body>
    <canvas id="gameCanvas"></canvas>
    <div id="warning"></div>
    <div id="ui">
        <div>コイン: <span id="coins">0</span> / 10</div>
        <div>残り時間: <span id="timer">60</span>秒</div>
    </div>
    
    <div id="viewControls">
        <div></div>
        <div class="control-btn" data-view="up">↑</div>
        <div></div>
        <div class="control-btn" data-view="left">←</div>
        <div></div>
        <div class="control-btn" data-view="right">→</div>
        <div></div>
        <div class="control-btn" data-view="down">↓</div>
        <div></div>
    </div>

    <div id="controls">
        <div style="display: grid; grid-template-columns: repeat(3, 60px); grid-template-rows: repeat(2, 60px); gap: 5px;">
            <div></div>
            <div class="control-btn" data-key="KeyW">W</div>
            <div></div>
            <div class="control-btn" data-key="KeyA">A</div>
            <div class="control-btn" data-key="KeyS">S</div>
            <div class="control-btn" data-key="KeyD">D</div>
        </div>
        <div style="margin-top: 10px;">
            <div class="control-btn jump" data-key="Space">ジャンプ</div>
        </div>
    </div>

    <div id="instructions">
        <h2>🎮 一人称プラットフォーマー</h2>
        <div class="controls-info">
            <p><strong>操作方法:</strong></p>
            <p>🎯 右上のボタン: 視点を動かす</p>
            <p>🏃 右下のW/A/S/D: 移動</p>
            <p>⌨️ キーボードでも操作できます</p>
            <p>🟢 ジャンプボタン: ジャンプ</p>
        </div>
        <p><strong>目標:</strong> すべてのコイン(10個)を60秒以内に集めよう!</p>
        <p>⚠️ 回転するバーに当たると弾き飛ばされるよ!</p>
        <button onclick="startGame()">ゲームスタート</button>
    </div>
    <div id="gameOver">
        <h2>🎉 クリア!</h2>
        <p>タイム: <span id="finalTime"></span>秒</p>
        <button onclick="location.reload()">もう一度プレイ</button>
    </div>

    <script src="https://cdnjs.cloudflare.com/ajax/libs/three.js/r128/three.min.js"></script>
    <script src="game.js"></script>
</body>
</html>